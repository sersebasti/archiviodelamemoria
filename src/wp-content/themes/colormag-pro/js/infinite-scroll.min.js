!function(t){if("undefined"==typeof colormagInfiniteScrollParams)return;let n=colormagInfiniteScrollParams,e=parseInt(n.infiniteTotal),o=parseInt(n.infiniteCount),i=n.ajaxUrl,a=n.infiniteNonce,r=n.pagination,s=!0,c=n.infiniteScrollEvent,l=n.nextPostLoadEvent,f=n.allPostsLoadedMessage,p=n.catId,u=n.catQueryVars,d=n.curPostId,g=1===parseInt(n.isSinglePost);function m(r){let c={action:g?"colormag_next_post_load_response":"tg_infinite_scroll",page_no:r,nonce:a,cat_id:p,query_vars:g?u:n.queryVars,cur_post_id:d},l=t(".tg-load-more");l.addClass("loading"),t.post(i,c,(function(n){let i=t(n);if(l.removeClass("loading"),g){let n=document.createElement("div");n.setAttribute("class","colormag-ajax-post-wrapper"),t("#primary .tg-load-next-post").append(n),t("#primary .tg-load-next-post .colormag-ajax-post-wrapper:last-of-type").append(i),t(window).trigger("colormagAjaxSinglePostLoaded")}else t("#primary .article-container").append(i),o>e&&(l.addClass("tg-no-more-post"),l.html('<span class="tg-no-more-post-text">'+f+"</span>"));s=!0}))}function _(t,n,e={}){return new IntersectionObserver((function(t){t.forEach((function(t){n(t)}))}),e).observe(document.querySelector(t))}if("infinite_scroll"===r)switch(c){case"button":t(document).on("click",".tg-load-more-btn",(function(t){if(t.preventDefault(),o&&e){if(o>e)return!1;m(o),o++}}));break;case"scroll":if(t("#primary .article-container").find("article:last").length>0){if(o>e)return!1;_(".tg-infinite-pagination",(function(t){t.isIntersecting&&s&&o<=e&&(m(o),o++,s=!1)}),{})}}if(g)switch(l){case"button":t(document).on("click",".tg-load-more-btn",(function(t){if(t.preventDefault(),o&&e){if(o>e)return!1;m(o),o++}}));break;case"scroll":if(o>e)return!1;_(".tg-infinite-pagination",(function(t){t.isIntersecting&&s&&o<=e&&(m(o),o++,s=!1)}),{})}}(jQuery);